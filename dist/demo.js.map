{"version":3,"sources":["webpack:///webpack/bootstrap 0ac77847606b2251361d","webpack:///./demo/index.js","webpack:///./demo/TimeDemo.js","webpack:///./~/classnames/index.js","webpack:///./src/index.js","webpack:///./src/Time.js"],"names":[],"mappings":"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","file":"demo.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 0ac77847606b2251361d\n **/","/**\n * Time Component Demo for tingle\n * @author shane.wuq\n *\n * Copyright 2014-2015, Tingle Team, Alinw.\n * All rights reserved.\n */\nwindow.FaskClick && FastClick.attach(document.body);\nvar Demo = require('./TimeDemo');\nReact.render(<Demo/>, document.getElementById('TingleDemo'));\n\n\n/** WEBPACK FOOTER **\n ** ./demo/index.js\n **/","/**\n * Time Component Demo for tingle\n * @author shane.wuq\n *\n * Copyright 2014-2015, Tingle Team, Alinw.\n * All rights reserved.\n */\n\nvar classnames = require('classnames');\n\nvar Time = require('../src');\n\nclass Demo extends React.Component {\n\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <div>\n                <Time stamp=\"1446009194366\"/>\n                <Time stamp=\"1422683666000\" format=\"YYYY-MM-DD\" past={true} maxPastDays='270'/>\n                <Time stamp=\"1445958112957\" format=\"YYYY-MM-DD hh:mm:ss\" past={true} />\n            </div>\n        );\n    }\n};\n\nmodule.exports = Demo;\n\n\n\n/** WEBPACK FOOTER **\n ** ./demo/TimeDemo.js\n **/","/*!\n  Copyright (c) 2015 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses += ' ' + arg;\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tclasses += ' ' + classNames.apply(null, arg);\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses += ' ' + key;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.substr(1);\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/classnames/index.js\n ** module id = 2\n ** module chunks = 0\n **/","/**\n * Time Component Style for tingle\n * @author shane.wuq\n *\n * Copyright 2014-2015, Tingle Team, Alinw.\n * All rights reserved.\n */\n\nmodule.exports = require('./Time');\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","/**\n * Time Component for tingle\n * @param {stamp} String time\n * @param {post} Boolean  是否显示‘x天前’格式\n * @param {maxPastDays} String past为true时,此项才有效\n * @param {format} String\n * @author shane.wuq\n * Copyright 2014-2015, Tingle Team, Alinw.\n * All rights reserved.\n */\nvar classnames = require('classnames');\n\n// 定义时间常量\nconst s = 1000;\nconst m = s*60;\nconst h = m*60;\nconst d = h*24;\n\n// 年月日分隔符\nlet[yc, mc, dc] = ['-', '-', '-']\n\n//\nlet arr = new Map([\n    ['分钟', m],\n    ['小时', h],\n    ['天', d]\n]);\n\nlet displayTime;\n\nclass Time extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            past: props.past,\n            maxPastDays: props.maxPastDays,\n            format: props.format,\n            pastTime: this._formatFn(true),\n            formatTime: this._formatFn(false)\n        }\n    }\n\n    _formatFn(isPast) {\n        const t = this;\n        let format = t.props.format.toLocaleUpperCase();\n\n        if(isPast) {\n            /**\n             * 1天前;1小时前;1分钟前\n             */\n            // 当前时间\n            let nowTime = (new Date()).valueOf();\n\n            // 传输入时间与当前时间的时间差\n            let rangeTime = nowTime - this.props.stamp;\n\n            let flag = false\n            arr.forEach((value, key) => {\n                let rangeRate = Math.floor(rangeTime/value);\n                if (rangeRate >= 1) {\n\n                    // FIXME: 中午12:00相对于昨天23:00，也会走'1小时前’的逻辑,因为一天(24小时)没到；\n                    displayTime = `1${key}前`;\n\n                    // TODO: 这里有没有更好办法\n                    if (rangeRate >= parseInt(t.props.maxPastDays, 10) && key === '天') {\n                        flag = true;\n                    } else {\n                        displayTime = `${rangeRate}${key}前`\n                    }\n                }\n            });\n\n            return flag ? t._normalFormat(format) : displayTime;\n\n        } else {\n            return t._normalFormat(format);\n        }\n    }\n\n    _normalFormat(format) {\n        let time = new Date(parseInt(this.props.stamp, 10));\n        // 年,月,日,时,分,秒\n        let [year, month, day, hour, minute, second] = [\n            time.getFullYear(),\n            time.getMonth() + 1,\n            time.getDate(),\n            time.getHours(),\n            time.getMinutes(),\n            time.getSeconds()\n        ];\n        /**\n         * 默认格式:YYYY—MM-DD\n         * 支持格式如下:\n         * YYYY/MM/DD; YYYY年MM月DD日; YYYY-MM-DD hh:mm:ss\n         * 支持简写 eg: YY-M-D 15-1-9\n         */\n        if (/(Y+)/.test(format)) {\n            let reg$ = RegExp.$1.length;\n            if (reg$ === 2) {\n                year = String(year).slice(2, 4);\n            }\n            yc = format.substr(reg$, 1);\n        }\n        if (/(M+)/.test(format)) {\n            let reg$ = RegExp.$1.length;\n            if (reg$ === 2 && month < 10) month = '0' + month;\n            mc = format.substr(format.indexOf('M') + reg$, 1);\n        }\n        if (/(D+)/.test(format)) {\n            let reg$ = RegExp.$1.length;\n            if (reg$ === 2 && day < 10) day = '0' + day;\n            dc = format.substr(format.indexOf('D') + reg$, 1);\n        }\n\n        displayTime = `${year}${yc}${month}${mc}${day}${dc}`;\n\n        if (format.indexOf('HH:MM:SS') > -1) {\n            minute = minute < 10 ? '0' + minute : minute;\n            second = second < 10 ? '0' + second : second;\n            displayTime +=` ${hour}:${minute}:${second}`;\n        }\n\n        return displayTime;\n    }\n\n    handleToggleFormat() {\n        const t = this;\n\n        // 传入的props.past为false; 不需要切换显示方式\n        if(!t.props.past)  return false;\n\n        t.setState({\n            past: !t.state.past\n        });\n    }\n\n    render() {\n        const t = this;\n        return (\n            <div ref=\"root\" className={classnames('tTime', {\n                [t.props.className]: !!t.props.className\n            })} onClick={t.handleToggleFormat.bind(t)}>\n                {t.state.past ? t.state.pastTime : t.state.formatTime}\n            </div>\n        );\n    }\n}\n\nTime.defaultProps = {\n    past: false,\n    maxPastDays: '7',\n    format: 'YYYY-MM-DD'\n}\n\nTime.propTypes = {\n    past: React.PropTypes.boolean,\n    maxPastDays: React.PropTypes.string,\n    format: React.PropTypes.string\n}\n\nTime.displayName = 'Time';\n\nmodule.exports = Time;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Time.js\n **/"],"sourceRoot":""}